import ipywidgets as widgets
from IPython.display import display, clear_output

veggies = ["рдмрдЯрд╛рдЯрд╛", "рдХрд╛рдВрджрд╛", "рдЯреЛрдореЕрдЯреЛ", "рдорд┐рд░рдЪреА", "рдлреНрд▓реЙрд╡рд░", "рдкрд╛рд▓рдХ"]

veggie_select = widgets.SelectMultiple(
    options=veggies,
    description='рднрд╛рдЬреНрдпрд╛:',
    rows=6
)

qty_slider = widgets.IntSlider(
    value=2,
    min=1,
    max=10,
    step=1,
    description='рдХрд┐рд▓реЛ:'
)

phone_box = widgets.Text(
    value='+91',
    description='рдлреЛрди:'
)

order_button = widgets.Button(
    description='ЁЯУж рдСрд░реНрдбрд░ рддрдпрд╛рд░ рдХрд░рд╛',
    button_style='success'
)

output = widgets.Output()

def create_order(b):
    with output:
        clear_output()
        selected = veggie_select.value
        qty = qty_slider.value
        phone = phone_box.value.strip()
        
        if not selected:
            print("рдХреГрдкрдпрд╛ рднрд╛рдЬреА рдирд┐рд╡рдбрд╛.")
            return
        if not phone.startswith("+91") or len(phone) != 13:
            print("рдпреЛрдЧреНрдп рдореЛрдмрд╛рдИрд▓ рдирдВрдмрд░ рджреНрдпрд╛.")
            return

        # тЬЕ msg рдЗрдереЗ define рдХрд░рддреЛ
        msg = f"рдирдорд╕реНрдХрд╛рд░!\nрдорд╛рдЭреА рднрд╛рдЬреА рдСрд░реНрдбрд░:\n"
        for item in selected:
            msg += f"- {item} : {qty} рдХрд┐рд▓реЛ\n"
        msg += f"\nрдлреЛрди: {phone}\nрдзрдиреНрдпрд╡рд╛рдж!"

        print("тЬЕ рдСрд░реНрдбрд░ рддрдпрд╛рд░!\n")
        print(msg)

        # тЬЕ рдЖрддрд╛ msg рд╡рд╛рдкрд░реВрди рдлрд╛рдИрд▓ рд╕реЗрд╡реНрд╣ рдХрд░рддреЛ
        with open("order.txt", "w", encoding='utf-8') as f:
            f.write(phone + "\n")
            f.write(msg)

order_button.on_click(create_order)

display(veggie_select, qty_slider, phone_box, order_button, output)
